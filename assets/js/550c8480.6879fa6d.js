"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8794],{1364:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>f,frontMatter:()=>o,metadata:()=>l,toc:()=>h});const l=JSON.parse('{"id":"middleware/flip","title":"flip","description":"Changes the placement of the floating element to keep it in view.","source":"@site/docs/middleware/flip.md","sourceDirName":"middleware","slug":"/middleware/flip","permalink":"/aether/docs/middleware/flip","draft":false,"unlisted":false,"editUrl":"https://github.com/quamatic/aether/tree/main/website/docs/middleware/flip.md","tags":[],"version":"current","frontMatter":{"title":"flip"},"sidebar":"aether","previous":{"title":"offset","permalink":"/aether/docs/middleware/offset"},"next":{"title":"autoPlacement","permalink":"/aether/docs/middleware/auto-placement"}}');var i=t(6106),a=t(2036),r=t(9269),s=t(8914);const o={title:"flip"},c=void 0,d={},h=[{value:"Example",id:"example",level:2},{value:"Input",id:"input",level:2},{value:"<code>fallbackAxisSideDirection</code>",id:"fallbackaxissidedirection",level:3},{value:"<code>flipAlignment</code>",id:"flipalignment",level:3},{value:"<code>fallbackPlacements</code>",id:"fallbackplacements",level:3},{value:"<code>fallbackStrategy</code>",id:"fallbackstrategy",level:3},{value:"<code>detectOverflowConfig</code>",id:"detectoverflowconfig",level:3},{value:"Combining with <code>shift()</code>",id:"combining-with-shift",level:2},{value:"Conflict with <code>autoPlacement()</code>",id:"conflict-with-autoplacement",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Changes the placement of the floating element to keep it in view."}),"\n",(0,i.jsx)(n.p,{children:"This prevents the floating element from overflowing along its side axis by flipping it to the opposite side by default."}),"\n",(0,i.jsx)("div",{class:"text--center",children:(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:t(8889).A+"",width:"512",height:"384"})})}),"\n",(0,i.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,i.jsxs)(r.A,{groupId:"package-manager",children:[(0,i.jsx)(s.A,{value:"wally",label:"luau",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-luau",children:"local Aether = require(path.to.aether)\n\nAether.process(reference, target, {\n    middleware = { flip() }\n})\n"})})}),(0,i.jsx)(s.A,{value:"roblox-ts",label:"roblox-ts",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'import { process, flip } from "@rbxts/aether";\n\nprocess(reference, target, {\n    middleware: [flip()]\n})\n'})})})]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["This is an alternative to ",(0,i.jsx)(n.code,{children:"autoPlacement()"}),", so only one of either can be used. See ",(0,i.jsx)(n.a,{href:"./auto-placement#conflict-with-flip",children:"how they differ here"}),"."]})}),"\n",(0,i.jsxs)(n.admonition,{type:"danger",children:[(0,i.jsxs)(n.p,{children:["The placement returned from ",(0,i.jsx)(n.code,{children:"process()"})," is ",(0,i.jsx)(n.strong,{children:"always"})," the final one, not necessarily the one you passed in as the \u201cpreferred\u201d one."]}),(0,i.jsxs)(n.p,{children:["This is, of course, due to the nature of ",(0,i.jsx)(n.code,{children:"flip()"}),"."]})]}),"\n",(0,i.jsx)(n.h2,{id:"input",children:"Input"}),"\n",(0,i.jsxs)(n.p,{children:["This is the input you can pass to ",(0,i.jsx)(n.code,{children:"flip()"}),":"]}),"\n",(0,i.jsxs)(r.A,{groupId:"package-manager",children:[(0,i.jsx)(s.A,{value:"wally",label:"luau",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-luau",children:'type Input = {\n    mainAxis: boolean?,\n    crossAxis: boolean?,\n    fallbackAxisSideDirection: "none" | "start" | "end"?,\n    flipAlignment: boolean?,\n    fallbackPlacements: { Placement }?,\n    fallbackStrategy: "best-fit" | "initial-placement"?,\n    detectOverflowConfig: DetectOverflowConfig?,\n}\n'})})}),(0,i.jsx)(s.A,{value:"roblox-ts",label:"roblox-ts",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'interface Input {\n    mainAxis?: boolean;\n    crossAxis?: boolean;\n    fallbackAxisSideDirection?: "none" | "start" | "end",\n    flipAlignment?: boolean,\n    fallbackPlacements?: Placement[],\n    fallbackStrategy?: "best-fit" | "initial-placement",\n    detectOverflowConfig?: DetectOverflowConfig;\n}\n'})})})]}),"\n",(0,i.jsx)(n.h3,{id:"fallbackaxissidedirection",children:(0,i.jsx)(n.code,{children:"fallbackAxisSideDirection"})}),"\n",(0,i.jsxs)(n.p,{children:["Default value: ",(0,i.jsx)(n.code,{children:'"none"'})]}),"\n",(0,i.jsx)(n.p,{children:"Whether to allow fallback to the opposite axis if no placements along the preferred placement axis fit, and if so, which side direction along that axis to choose. If necessary, it will fallback to the other direction."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:'"none"'})," signals that no fallback to the opposite axis should take place."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:'"start"'})," represents ",(0,i.jsx)(n.code,{children:"top"})," or ",(0,i.jsx)(n.code,{children:"left"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:'"end"'})," represent ",(0,i.jsx)(n.code,{children:"bottom"})," or ",(0,i.jsx)(n.code,{children:"right"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"In RTL writing direction, the x-axis directions are reversed."})}),"\n",(0,i.jsx)(n.h3,{id:"flipalignment",children:(0,i.jsx)(n.code,{children:"flipAlignment"})}),"\n",(0,i.jsxs)(n.p,{children:["Default value: ",(0,i.jsx)(n.code,{children:"true"})]}),"\n",(0,i.jsxs)(n.p,{children:["When an alignment is specified, e.g. ",(0,i.jsx)(n.code,{children:'"top-start"'})," instead of just ",(0,i.jsx)(n.code,{children:'"top"'}),", this will flip to ",(0,i.jsx)(n.code,{children:'"top-end"'})," if ",(0,i.jsx)(n.code,{children:"start"})," doesn\u2019t fit."]}),"\n",(0,i.jsx)(n.h3,{id:"fallbackplacements",children:(0,i.jsx)(n.code,{children:"fallbackPlacements"})}),"\n",(0,i.jsxs)(n.p,{children:["Default value: ",(0,i.jsx)(n.code,{children:"nil"})]}),"\n",(0,i.jsxs)(n.p,{children:["This describes an ",(0,i.jsx)(n.strong,{children:"explicit"})," array of placements to try if the initial ",(0,i.jsx)(n.code,{children:"placement"})," doesn\u2019t fit on the axes in which overflow is checked."]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["The options ",(0,i.jsx)(n.code,{children:"flipAlignment"})," and ",(0,i.jsx)(n.code,{children:"fallbackAxisSideDirection"})," no longer have an effect if this option is explicitly specified, as they are only shortcuts to create a computed list of fallback placements. To ensure your explicit list is preferred, they will be ignored."]})}),"\n",(0,i.jsx)(n.h3,{id:"fallbackstrategy",children:(0,i.jsx)(n.code,{children:"fallbackStrategy"})}),"\n",(0,i.jsxs)(n.p,{children:["Default value: ",(0,i.jsx)(n.code,{children:'"best-fit"'})]}),"\n",(0,i.jsx)(n.p,{children:"When no placements fit, then you\u2019ll want to decide what happens. \"best-fit\" will use the placement which fits best on the checked axes. 'initial-placement' will use the initial placement specified."}),"\n",(0,i.jsx)(n.h3,{id:"detectoverflowconfig",children:(0,i.jsx)(n.code,{children:"detectOverflowConfig"})}),"\n",(0,i.jsxs)(n.p,{children:["All of ",(0,i.jsx)(n.a,{href:"../guides/collisions#config",children:"detectOverflow()"}),"'s config can be passed in this."]}),"\n",(0,i.jsxs)(n.h2,{id:"combining-with-shift",children:["Combining with ",(0,i.jsx)(n.a,{href:"./shift",children:(0,i.jsx)(n.code,{children:"shift()"})})]}),"\n",(0,i.jsxs)(n.p,{children:["If you\u2019re allowing fallback to the opposite axis of the preferred placement via ",(0,i.jsx)(n.code,{children:"fallbackAxisSideDirection"})," or ",(0,i.jsx)(n.code,{children:"fallbackPlacements"}),", then you may want to determine what behavior you want when combining ",(0,i.jsx)(n.code,{children:"flip()"})," with ",(0,i.jsx)(n.code,{children:"shift()"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"If you want to ensure the placement side is preserved as best as possible without flipping, then you have two options to consider:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Disabling the cross axis check in ",(0,i.jsx)(n.code,{children:"flip()"})," places top priority on ",(0,i.jsx)(n.code,{children:"shift()"})," to do its work, with ",(0,i.jsx)(n.code,{children:"flip()"})," only taking action when absolutely necessary. The preferred placement of the floating element will be conserved as much as possible."]}),"\n"]}),"\n",(0,i.jsxs)(r.A,{groupId:"package-manager",children:[(0,i.jsx)(s.A,{value:"wally",label:"luau",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-luau",children:'local Aether = require(path.to.aether)\n\nlocal middleware = {\n    Aether.flip({\n        fallbackAxisSideDirection = "start",\n        crossAxis = false,\n    }),\n    Aether.shift(),\n}\n'})})}),(0,i.jsx)(s.A,{value:"roblox-ts",label:"roblox-ts",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'import { flip, shift } from "@rbxts/aether";\n\nconst middleware = [\n    flip({\n        fallbackAxisSideDirection: "start",\n        crossAxis: false,\n    }),\n    shift(),\n]\n'})})})]}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["Placing ",(0,i.jsx)(n.code,{children:"shift()"})," before ",(0,i.jsx)(n.code,{children:"flip()"})," in the array ensures it can do its work before ",(0,i.jsx)(n.code,{children:"flip()"})," tries to change the placement. This is similar to the first technique above, but allows ",(0,i.jsx)(n.code,{children:"flip()"})," to take action on its crossAxis too \u2014 useful if ",(0,i.jsx)(n.code,{children:"shift()"})," has a limiter."]}),"\n"]}),"\n",(0,i.jsxs)(r.A,{groupId:"package-manager",children:[(0,i.jsx)(s.A,{value:"wally",label:"luau",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-luau",children:'local Aether = require(path.to.aether)\n\nlocal middleware = {\n    Aether.shift({\n        limiter = Aether.limitShift(),\n    }),\n    Aether.flip({\n        fallbackAxisSideDirection = "start",\n    }),\n}\n'})})}),(0,i.jsx)(s.A,{value:"roblox-ts",label:"roblox-ts",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'import { flip, shift, limitShift } from "@rbxts/aether";\n\nconst middleware = [\n    shift({\n        limiter: limitShift(),\n    }),\n    flip({\n        fallbackAxisSideDirection: "start",\n    }),\n]\n'})})})]}),"\n",(0,i.jsxs)(n.admonition,{type:"note",children:[(0,i.jsxs)(n.p,{children:["The second method is only recommended if your placement is not edge aligned, e.g. ",(0,i.jsx)(n.code,{children:'"top"'})," instead of ",(0,i.jsx)(n.code,{children:'"top-start"'}),". This is because alignment flipping will no longer be possible since ",(0,i.jsx)(n.code,{children:"shift()"})," takes over first.`"]}),(0,i.jsx)(n.p,{children:"For reusable/generic components, you can use basic conditional checks on the supplied preferred placement to alter the ordering."})]}),"\n",(0,i.jsxs)(n.h2,{id:"conflict-with-autoplacement",children:["Conflict with ",(0,i.jsx)(n.a,{href:"./auto-placement",children:(0,i.jsx)(n.code,{children:"autoPlacement()"})})]})]})}function f(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},8914:(e,n,t)=>{t.d(n,{A:()=>r});t(7378);var l=t(3372);const i={tabItem:"tabItem_FS4i"};var a=t(6106);function r(e){let{children:n,hidden:t,className:r}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,l.A)(i.tabItem,r),hidden:t,children:n})}},9269:(e,n,t)=>{t.d(n,{A:()=>y});var l=t(7378),i=t(3372),a=t(2703),r=t(505),s=t(5086),o=t(6656),c=t(2097),d=t(421);function h(e){return l.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,l.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:n,children:t}=e;return(0,l.useMemo)((()=>{const e=n??function(e){return h(e).map((e=>{let{props:{value:n,label:t,attributes:l,default:i}}=e;return{value:n,label:t,attributes:l,default:i}}))}(t);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function f(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function p(e){let{queryString:n=!1,groupId:t}=e;const i=(0,r.W6)(),a=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,o.aZ)(a),(0,l.useCallback)((e=>{if(!a)return;const n=new URLSearchParams(i.location.search);n.set(a,e),i.replace({...i.location,search:n.toString()})}),[a,i])]}function x(e){const{defaultValue:n,queryString:t=!1,groupId:i}=e,a=u(e),[r,o]=(0,l.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!f({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const l=t.find((e=>e.default))??t[0];if(!l)throw new Error("Unexpected error: 0 tabValues");return l.value}({defaultValue:n,tabValues:a}))),[c,h]=p({queryString:t,groupId:i}),[x,m]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[i,a]=(0,d.Dv)(t);return[i,(0,l.useCallback)((e=>{t&&a.set(e)}),[t,a])]}({groupId:i}),b=(()=>{const e=c??x;return f({value:e,tabValues:a})?e:null})();(0,s.A)((()=>{b&&o(b)}),[b]);return{selectedValue:r,selectValue:(0,l.useCallback)((e=>{if(!f({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);o(e),h(e),m(e)}),[h,m,a]),tabValues:a}}var m=t(7606);const b={tabList:"tabList_scTV",tabItem:"tabItem_tmPb"};var j=t(6106);function g(e){let{className:n,block:t,selectedValue:l,selectValue:r,tabValues:s}=e;const o=[],{blockElementScrollPositionUntilNextRender:c}=(0,a.a_)(),d=e=>{const n=e.currentTarget,t=o.indexOf(n),i=s[t].value;i!==l&&(c(n),r(i))},h=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=o.indexOf(e.currentTarget)+1;n=o[t]??o[0];break}case"ArrowLeft":{const t=o.indexOf(e.currentTarget)-1;n=o[t]??o[o.length-1];break}}n?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":t},n),children:s.map((e=>{let{value:n,label:t,attributes:a}=e;return(0,j.jsx)("li",{role:"tab",tabIndex:l===n?0:-1,"aria-selected":l===n,ref:e=>o.push(e),onKeyDown:h,onClick:d,...a,className:(0,i.A)("tabs__item",b.tabItem,a?.className,{"tabs__item--active":l===n}),children:t??n},n)}))})}function v(e){let{lazy:n,children:t,selectedValue:a}=e;const r=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=r.find((e=>e.props.value===a));return e?(0,l.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:r.map(((e,n)=>(0,l.cloneElement)(e,{key:n,hidden:e.props.value!==a})))})}function w(e){const n=x(e);return(0,j.jsxs)("div",{className:(0,i.A)("tabs-container",b.tabList),children:[(0,j.jsx)(g,{...n,...e}),(0,j.jsx)(v,{...n,...e})]})}function y(e){const n=(0,m.A)();return(0,j.jsx)(w,{...e,children:h(e.children)},String(n))}},8889:(e,n,t)=>{t.d(n,{A:()=>l});const l=t.p+"assets/images/flip-3eb007c17836f68cf9bcb77592dc9ef5.gif"},2036:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>s});var l=t(7378);const i={},a=l.createContext(i);function r(e){const n=l.useContext(a);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),l.createElement(a.Provider,{value:n},e.children)}}}]);