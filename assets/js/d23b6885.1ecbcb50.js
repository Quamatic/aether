"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3149],{3885:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"guides/processing","title":"Processing","description":"In order to process the position for a floating element next to its reference, Aether provides the process() function.","source":"@site/docs/guides/processing.md","sourceDirName":"guides","slug":"/guides/processing","permalink":"/aether/docs/guides/processing","draft":false,"unlisted":false,"editUrl":"https://github.com/quamatic/aether/tree/main/website/docs/guides/processing.md","tags":[],"version":"current","frontMatter":{"title":"Processing"},"sidebar":"aether","previous":{"title":"Installation","permalink":"/aether/docs/installation"},"next":{"title":"Updating","permalink":"/aether/docs/guides/updating"}}');var l=t(6106),i=t(2036),s=t(9269),a=t(8914);const o={title:"Processing"},c=void 0,d={},h=[{value:"Example",id:"example",level:2},{value:"Anchoring",id:"anchoring",level:2},{value:"Input",id:"input",level:2},{value:"<code>placement</code>",id:"placement",level:3},{value:"<code>middleware</code>",id:"middleware",level:3},{value:"Placement modifiers",id:"placement-modifiers",level:4},{value:"Visibility optimizers",id:"visibility-optimizers",level:4},{value:"Data providers",id:"data-providers",level:4},{value:"Custom",id:"custom",level:4},{value:"Return value",id:"return-value",level:2},{value:"<code>x</code>",id:"x",level:3},{value:"<code>y</code>",id:"y",level:3},{value:"<code>placement</code>",id:"placement-1",level:3},{value:"<code>data</code>",id:"data",level:3},{value:"Virtual Reference Elements",id:"virtual-reference-elements",level:2},{value:"Cache",id:"cache",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.p,{children:["In order to process the position for a floating element next to its reference, Aether provides the ",(0,l.jsx)(n.code,{children:"process()"})," function."]}),"\n",(0,l.jsx)(n.h2,{id:"example",children:"Example"}),"\n",(0,l.jsx)(n.p,{children:"At its most basic, the function accepts two elements:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Reference element"})," - also known as the anchor element, this is the element that is being ",(0,l.jsx)(n.em,{children:"referred"})," to for positioning. Often this is a button that triggers a floating popover like a tooltip or menu."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Target element"})," - this is the element that floats next to the reference element, remaining anchored to it. This is the popover or tooltip itself."]}),"\n"]}),"\n",(0,l.jsxs)(s.A,{groupId:"package-manager",children:[(0,l.jsx)(a.A,{value:"wally",label:"luau",default:!0,children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-luau",children:'local Aether = require(path.to.aether)\n\nlocal reference = Instance.new("TextButton")\nlocal target = Instance.new("Frame")\n\nlocal result = Aether.process(reference, target)\ntarget.Position = UDim2.fromOffset(result.x, result.y)\n'})})}),(0,l.jsx)(a.A,{value:"roblox-ts",label:"roblox-ts",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:'import { process } from "@rbxts/aether";\n\nconst reference = new Instance("TextButton");\nconst target = new Instance("Frame");\n\nconst result = process(reference, target);\ntarget.Position = UDim2.fromOffset(result.x, result.y);\n'})})})]}),"\n",(0,l.jsx)(n.admonition,{type:"warning",children:(0,l.jsxs)(n.p,{children:["To ensure positioning works smoothly, the floating element's ",(0,l.jsx)(n.code,{children:"AnchorPoint"})," should ",(0,l.jsx)(n.em,{children:"not"})," be set - i.e., anything other than ",(0,l.jsx)(n.code,{children:"(0, 0)"})]})}),"\n",(0,l.jsx)(n.h2,{id:"anchoring",children:"Anchoring"}),"\n",(0,l.jsxs)(n.p,{children:["Since ",(0,l.jsx)(n.code,{children:"process()"})," is only a single function call, it only positions the floating element once."]}),"\n",(0,l.jsxs)(n.p,{children:["To ensure it remains anchored to the reference element in a variety of scenarios, wrap the calculation in ",(0,l.jsx)(n.a,{href:"./updating",children:"autoUpdate()"}),":"]}),"\n",(0,l.jsxs)(s.A,{groupId:"package-manager",children:[(0,l.jsx)(a.A,{value:"wally",label:"luau",default:!0,children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-luau",children:"local Aether = require(path.to.aether)\n\nlocal cleanup = Aether.autoUpdate(reference, target, function()\n    local result = Aether.process(reference, target)\n    print(result.x, result.y)\nend)\n\n-- ...later, when it's not needed anymore:\ncleanup()\n"})})}),(0,l.jsx)(a.A,{value:"roblox-ts",label:"roblox-ts",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:'import { autoUpdate, process } from "@rbxts/aether";\n\nconst cleanup = autoUpdate(reference, target, () => {\n    const result = process(reference, target);\n    print(result.x, result.y);\n});\n\n// ...later, when it\'s not needed anymore:\ncleanup();\n'})})})]}),"\n",(0,l.jsx)(n.h2,{id:"input",children:"Input"}),"\n",(0,l.jsxs)(n.p,{children:["This is the input you can pass to ",(0,l.jsx)(n.code,{children:"process()"}),":"]}),"\n",(0,l.jsxs)(s.A,{groupId:"package-manager",children:[(0,l.jsx)(a.A,{value:"wally",label:"luau",default:!0,children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-luau",children:"type ProcessConfig = {\n    placement: Placement?,\n    middleware: { Middleware }?,\n    rtl: boolean?,\n}\n"})})}),(0,l.jsx)(a.A,{value:"roblox-ts",label:"roblox-ts",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"interface ProcessConfig {\n    placement?: Placement;\n    middleware?: Middleware[];\n    rtl?: boolean;\n}\n"})})})]}),"\n",(0,l.jsx)(n.h3,{id:"placement",children:(0,l.jsx)(n.code,{children:"placement"})}),"\n",(0,l.jsxs)(n.p,{children:["Default value: ",(0,l.jsx)(n.code,{children:'"bottom"'})]}),"\n",(0,l.jsx)(n.p,{children:"Where to place the floating element relative to its reference element."}),"\n",(0,l.jsx)(n.p,{children:"12 strings are available:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:'"top"'})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:'"top-start"'})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:'"top-end"'})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:'"bottom"'})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:'"bottom-start"'})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:'"bottom-end"'})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:'"left"'})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:'"left-start"'})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:'"left-end"'})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:'"right"'})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:'"right-start"'})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:'"right-end"'})}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"To further break down what these strings mean:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:'"top"'}),', "',(0,l.jsx)(n.code,{children:"bottom"}),'", ',(0,l.jsx)(n.code,{children:'"left"'}),", and ",(0,l.jsx)(n.code,{children:'"right"'})," are ",(0,l.jsx)(n.em,{children:"sides"}),"."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:'"-start"'})," and ",(0,l.jsx)(n.code,{children:'"-end"'})," are ",(0,l.jsx)(n.em,{children:"alignments"}),"."]}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{type:"note",children:(0,l.jsxs)(n.p,{children:["You aren't limited to just these 12 placements. ",(0,l.jsx)(n.a,{href:"../middleware/offset#creating-custom-placements",children:"offset()"})," allows you to create ",(0,l.jsx)(n.em,{children:"any"})," placement."]})}),"\n",(0,l.jsx)(n.h3,{id:"middleware",children:(0,l.jsx)(n.code,{children:"middleware"})}),"\n",(0,l.jsxs)(n.p,{children:["When you want granular control over how the floating element is positioned, middleware are used. They read the current coordinates, optionally alter them, and/or provide data for rendering. They compose and work together to produce the final coordinates which you receive as ",(0,l.jsx)(n.code,{children:"x"})," and ",(0,l.jsx)(n.code,{children:"y"})," parameters."]}),"\n",(0,l.jsx)(n.p,{children:"The following are included in the package:"}),"\n",(0,l.jsx)(n.h4,{id:"placement-modifiers",children:"Placement modifiers"}),"\n",(0,l.jsx)(n.p,{children:"These middleware alter the base placement coordinates."}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"../middleware/offset",children:(0,l.jsx)(n.code,{children:"offset()"})})," modifies the placement to add distance or margin between the reference and floating elements."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"../middleware/offset",children:(0,l.jsx)(n.code,{children:"inline()"})})," positions the floating element relative to individual client rects rather than the bounding box for better precision."]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"visibility-optimizers",children:"Visibility optimizers"}),"\n",(0,l.jsx)(n.p,{children:"These middleware alter the coordinates to ensure the floating element stays on screen optimally."}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"../middleware/shift",children:(0,l.jsx)(n.code,{children:"shift()"})})," prevents the floating element from overflowing a clipping container by shifting it to stay in view."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"../middleware/flip",children:(0,l.jsx)(n.code,{children:"flip()"})})," prevents the floating element from overflowing a clipping container by flipping it to the opposite placement to stay in view."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"../middleware/auto-placement",children:(0,l.jsx)(n.code,{children:"autoPlacement()"})})," automatically chooses a placement for you using a \u201cmost space\u201d strategy."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"../middleware/size",children:(0,l.jsx)(n.code,{children:"size()"})})," resizes the floating element, for example so it will not overflow a clipping container, or to match the width of the reference element."]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"data-providers",children:"Data providers"}),"\n",(0,l.jsx)(n.p,{children:"These middleware only provide data and do not alter the coordinates."}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"../middleware/arrow",children:(0,l.jsx)(n.code,{children:"arrow()"})})," provides data to position an inner element of the floating element such that it is centered to its reference element."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"../middleware/hide",children:(0,l.jsx)(n.code,{children:"hide()"})})," provides data to hide the floating element in applicable situations when it no longer appears attached to its reference element due to different clipping contexts."]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"custom",children:"Custom"}),"\n",(0,l.jsx)(n.p,{children:"You can also craft your own custom middleware to extend the behavior of the library. Read Middleware to learn how to create your own."}),"\n",(0,l.jsx)(n.h2,{id:"return-value",children:"Return value"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"process()"})," returns the following type:"]}),"\n",(0,l.jsxs)(s.A,{groupId:"package-manager",children:[(0,l.jsx)(a.A,{value:"wally",label:"luau",default:!0,children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-luau",children:"type ProcessResult = {\n    x: number,\n    y: number,\n    placement: Placement,\n    data: MiddlewareData,\n}\n"})})}),(0,l.jsx)(a.A,{value:"roblox-ts",label:"roblox-ts",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-typescript",children:"interface ProcessResult {\n    x: number;\n    y: number;\n    placement: Placement;\n    data: MiddlewareData;\n}\n"})})})]}),"\n",(0,l.jsx)(n.h3,{id:"x",children:(0,l.jsx)(n.code,{children:"x"})}),"\n",(0,l.jsx)(n.p,{children:"The x-coordinate of the floating element."}),"\n",(0,l.jsx)(n.h3,{id:"y",children:(0,l.jsx)(n.code,{children:"y"})}),"\n",(0,l.jsx)(n.p,{children:"The y-coordinate of the floating element."}),"\n",(0,l.jsx)(n.h3,{id:"placement-1",children:(0,l.jsx)(n.code,{children:"placement"})}),"\n",(0,l.jsx)(n.p,{children:"The final placement of the floating element, which may be different from the initial or preferred one passed in due to middleware modifications. This allows you to know which side the floating element is placed at."}),"\n",(0,l.jsx)(n.h3,{id:"data",children:(0,l.jsx)(n.code,{children:"data"})}),"\n",(0,l.jsx)(n.p,{children:"The data returned by any middleware used."}),"\n",(0,l.jsx)(n.h2,{id:"virtual-reference-elements",children:"Virtual Reference Elements"}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"reference"})," element can be input as a ",(0,l.jsx)(n.a,{href:"./virtual-elements",children:"virtual element"}),". This can be used when you need something like a custom reference area,\nor more control over your boundary."]}),"\n",(0,l.jsx)(n.h2,{id:"cache",children:"Cache"}),"\n",(0,l.jsx)(n.p,{children:"A cache is used during processing processing for storing element boundaries and scales. This is so processing speed is increased, such as during multiple lifecycle resets."}),"\n",(0,l.jsxs)(n.p,{children:["The cache only lives for a single ",(0,l.jsx)(n.code,{children:"process()"})," call."]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(u,{...e})}):u(e)}},8914:(e,n,t)=>{t.d(n,{A:()=>s});t(7378);var r=t(3372);const l={tabItem:"tabItem_FS4i"};var i=t(6106);function s(e){let{children:n,hidden:t,className:s}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,r.A)(l.tabItem,s),hidden:t,children:n})}},9269:(e,n,t)=>{t.d(n,{A:()=>y});var r=t(7378),l=t(3372),i=t(2703),s=t(505),a=t(5086),o=t(6656),c=t(2097),d=t(421);function h(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return h(e).map((e=>{let{props:{value:n,label:t,attributes:r,default:l}}=e;return{value:n,label:t,attributes:r,default:l}}))}(t);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:t}=e;const l=(0,s.W6)(),i=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,o.aZ)(i),(0,r.useCallback)((e=>{if(!i)return;const n=new URLSearchParams(l.location.search);n.set(i,e),l.replace({...l.location,search:n.toString()})}),[i,l])]}function x(e){const{defaultValue:n,queryString:t=!1,groupId:l}=e,i=u(e),[s,o]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:i}))),[c,h]=m({queryString:t,groupId:l}),[x,f]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[l,i]=(0,d.Dv)(t);return[l,(0,r.useCallback)((e=>{t&&i.set(e)}),[t,i])]}({groupId:l}),j=(()=>{const e=c??x;return p({value:e,tabValues:i})?e:null})();(0,a.A)((()=>{j&&o(j)}),[j]);return{selectedValue:s,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);o(e),h(e),f(e)}),[h,f,i]),tabValues:i}}var f=t(7606);const j={tabList:"tabList_scTV",tabItem:"tabItem_tmPb"};var g=t(6106);function v(e){let{className:n,block:t,selectedValue:r,selectValue:s,tabValues:a}=e;const o=[],{blockElementScrollPositionUntilNextRender:c}=(0,i.a_)(),d=e=>{const n=e.currentTarget,t=o.indexOf(n),l=a[t].value;l!==r&&(c(n),s(l))},h=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=o.indexOf(e.currentTarget)+1;n=o[t]??o[0];break}case"ArrowLeft":{const t=o.indexOf(e.currentTarget)-1;n=o[t]??o[o.length-1];break}}n?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.A)("tabs",{"tabs--block":t},n),children:a.map((e=>{let{value:n,label:t,attributes:i}=e;return(0,g.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>o.push(e),onKeyDown:h,onClick:d,...i,className:(0,l.A)("tabs__item",j.tabItem,i?.className,{"tabs__item--active":r===n}),children:t??n},n)}))})}function b(e){let{lazy:n,children:t,selectedValue:i}=e;const s=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=s.find((e=>e.props.value===i));return e?(0,r.cloneElement)(e,{className:(0,l.A)("margin-top--md",e.props.className)}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:s.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==i})))})}function w(e){const n=x(e);return(0,g.jsxs)("div",{className:(0,l.A)("tabs-container",j.tabList),children:[(0,g.jsx)(v,{...n,...e}),(0,g.jsx)(b,{...n,...e})]})}function y(e){const n=(0,f.A)();return(0,g.jsx)(w,{...e,children:h(e.children)},String(n))}},2036:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var r=t(7378);const l={},i=r.createContext(l);function s(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);